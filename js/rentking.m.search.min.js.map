{"version":3,"sources":["rentking.m.search.js"],"names":["$","$searchWrap","$searchForm","find","$mapWrap","$listContentWrap","$listScrollInner","$listScrollContent","window","on","searchMap","map","center","clearTimeout","timeout","setTimeout","panTo","document","e","preventDefault","rentshopMarker","setMap","addClass","removeClass","data","relayout","stopPropagation","$page","this","searchWrapOffset","offset","scrollTarget","scrollTop","each","$li","listItemOffset","push","$item","top","trigger","parent","rentshop","rentshopDetail","i","length","position","daum","maps","LatLng","lat","lng","addr1","split","content","slice","join","availcar","totalcar","marker","customOverlay","CustomOverlay","yAnchor","setCenter","panBy","submit","runLocationTask"],"mappings":"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","file":"rentking.m.search.min.js","sourcesContent":["/**\r\n  * Date: 2017-04-26\r\n */\r\n\r\n$(function() {\r\n\tvar $searchWrap = $('#searchWrap');\r\n\tvar $searchMap = $('#searchMap');\r\n\tvar $searchForm = $searchWrap.find('#searchForm');\r\n\tvar $mapWrap = $searchWrap.find('.map-wrap');\r\n\tvar $mapPointWrap = $mapWrap.find('.map-point-wrap');\r\n\tvar $listContentWrap = $('.list-content-wrap');\r\n\tvar $listScrollInner = $listContentWrap.find('.list-scroll-inner');\r\n\tvar $listScrollContent = $listScrollInner.find('.list-scroll-content');\r\n\r\n\t$(window).on('resize', function() {\r\n\t\tif (searchMap.map && searchMap.center) {\r\n\t\t\tclearTimeout(searchMap.timeout);\r\n\t\t\tsearchMap.timeout = setTimeout(function () {\r\n\t\t\t\tsearchMap.map.panTo(searchMap.center);\r\n\t\t\t}, 300);\r\n\t\t}\r\n\t});\r\n\r\n\t$(document)\r\n\t\t.on('click', '.map-wrap .go-list', function(e) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tif(searchMap.rentshopMarker) {\r\n\t\t\t\tsearchMap.rentshopMarker.setMap(null);\r\n\t\t\t\tsearchMap.rentshopMarker = null;\r\n\t\t\t}\r\n\r\n\t\t\t$searchWrap.addClass('list').removeClass('re-search rentshop-position');\r\n\t\t\t$('header').removeClass('no-shadow');\r\n\t\t\tif($searchWrap.data('detail')) {\r\n\t\t\t\t$searchWrap.data('detail', false);\r\n\t\t\t}\r\n\r\n\t\t\t$listScrollContent.find('li.item').removeClass('on');\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tsearchMap.map.relayout();\r\n\t\t\t\tsearchMap.map.panTo(searchMap.center);\r\n\t\t\t}, 400);\r\n\t\t})\r\n\t\t.on('init', '.list-content-wrap .list-scroll .page', function(e) {\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tvar $page = $(this);\r\n\t\t\tvar searchWrapOffset = $searchWrap.offset();\r\n\t\t\tvar scrollTop =  scrollTarget.scrollTop();\r\n\t\t\t$page.find('li.item').each(function() {\r\n\t\t\t\tvar $li = $(this);\r\n\t\t\t\tvar offset = $li.offset();\r\n\r\n\t\t\t\twindow.listItemOffset.push({\r\n\t\t\t\t\t$item: $li,\r\n\t\t\t\t\toffset: offset.top - searchWrapOffset.top\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\t$page.addClass('init');\r\n\t\t\tscrollTarget.trigger('scroll');\r\n\t\t})\r\n\t\t.on('click', '.list-content-wrap .list-scroll .page li.item button.show-location', function(e) {\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t$(this).parent().trigger('goRentshop');\r\n\t\t})\r\n\t\t.on('goRentshop', '.list-content-wrap .list-scroll .page li.item', function(e) {\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tvar $item = $(this);\r\n\t\t\tvar rentshop = $item.data('rentshop');\r\n\r\n\t\t\t$searchWrap.removeClass('list detail').addClass('rentshop-position');\r\n\t\t\t$('header').removeClass('no-shadow');\r\n\t\t\t$('body').removeClass('header-hide show-go-top');\r\n\r\n\t\t\tif(searchMap.rentshopMarker) {\r\n\t\t\t\tsearchMap.rentshopMarker.setMap(null);\r\n\t\t\t\tsearchMap.rentshopMarker = null;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar rentshopDetail = $searchWrap.data('rentshopDetail');\r\n\t\t\tfor(var i = 0; i < rentshopDetail.length; i++) {\r\n\t\t\t\tif(rentshopDetail[i]['idx'] == rentshop) {\r\n\t\t\t\t\tvar position = new daum.maps.LatLng(rentshopDetail[i].lat, rentshopDetail[i].lng);\r\n\r\n\t\t\t\t\tvar addr1 = rentshopDetail[i]['addr1'].split(' ');\r\n\t\t\t\t\tvar content = '<div class=\"info\">' +\r\n\t\t\t\t\t\t// '<div class=\"name\">' + rentshopDetail[i]['name'] + '(' + rentshopDetail[i]['affiliate']+ ')</div>' +\r\n\t\t\t\t\t\t// '<div class=\"address\">' + rentshopDetail[i]['addr1'] + ' ' + rentshop[i]['addr2'] + '</div>' +\r\n\t\t\t\t\t\t'<div class=\"name\">' + rentshopDetail[i]['affiliate'] + '</div>' +\r\n\t\t\t\t\t\t'<div class=\"address\">' + addr1.slice(0, addr1.length > 3 && (addr1[1] == '고양시' || addr1[1] == '성남시') ? 4 : 3).join(' ') + '</div>' +\r\n\t\t\t\t\t\t'<div class=\"time\">' +\r\n\t\t\t\t\t\t'<div class=\"title\">운영시간</div>' +\r\n\t\t\t\t\t\t'<div class=\"data\">평일(' + rentshopDetail[i]['s1time1'] + ' ~ ' + rentshopDetail[i]['s1time2'] + ')<br />주말/공휴일(' + rentshopDetail[i]['s2time1'] + ' ~ ' + rentshopDetail[i]['s2time2'] + ')</div>' +\r\n\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t'<div class=\"cars\">' +\r\n\t\t\t\t\t\t'<div class=\"title\">운영차량 <span class=\"description\">(이용가능/전체차량)</span></div>' +\r\n\t\t\t\t\t\t'<div class=\"data\">' + rentshopDetail[i].availcar + '대/' + rentshopDetail[i].totalcar + '대</div>' +\r\n\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t'</div>';\r\n\t\t\t\t\tvar marker = '<div class=\"marker rentshop-info on\" id=\"rentshop' + rentshopDetail[i]['idx'] + '\">' + content + '</div>';\r\n\t\t\t\t\tvar customOverlay = new daum.maps.CustomOverlay({\r\n\t\t\t\t\t\tposition: position,\r\n\t\t\t\t\t\tcontent: marker,\r\n\t\t\t\t\t\tyAnchor: 1\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcustomOverlay.setMap(searchMap.map);\r\n\t\t\t\t\tsearchMap.rentshopMarker = customOverlay;\r\n\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tsearchMap.map.relayout();\r\n\t\t\t\t\t\tsearchMap.map.setCenter(position);\r\n\t\t\t\t\t\tsearchMap.map.panBy(0, -120);\r\n\r\n\t\t\t\t\t}, 200);\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\t.on('click', '.list-search-wrap .close-search', function() {\r\n\t\t\t$searchWrap.removeClass('filter');\r\n\t\t\tscrollTarget.scrollTop(0);\r\n\t\t\tclearTimeout(searchMap.timeout);\r\n\t\t\tsearchMap.timeout = setTimeout(function() {\r\n\t\t\t\tsearchMap.map.relayout();\r\n\t\t\t\tsearchMap.map.setCenter(searchMap.center);\r\n\t\t\t}, 300);\r\n\t\t})\r\n\t\t.on('click', '.list-search-wrap .list-search-submit', function() {\r\n\t\t\t$searchWrap.removeClass('filter');\r\n\t\t\tscrollTarget.scrollTop(0);\r\n\t\t\t$searchForm.trigger('resetList').submit();\r\n\t\t})\r\n\t\t.on('click', '.list-content-wrap .grade-info button.option', function() {\r\n\t\t\t$searchForm.trigger('resetList').submit();\r\n\t\t})\r\n\t;\r\n\r\n\r\n\t$('header').addClass('no-shadow');\r\n\r\n\trunLocationTask();\r\n});"],"sourceRoot":"../../src/js"}