AmCharts.addInitHandler(function(a){function b(a){var b=this;this.version="1.0.3",this.chart=a,this.config={labelText:this.chart.labelText,labelFunction:this.chart.labelFunction,color:this.chart.color,fontFamily:this.chart.fontFamily,fontSize:this.chart.fontSize,maxLabelWidth:this.chart.maxLabelWidth,labelTickColor:this.chart.labelTickColor,labelTickAlpha:this.chart.labelTickAlpha,labelRadius:this.chart.labelRadius},this.drawTicks=function(){var c,a=this.chart,b=a.chartData;for(c=0;c<b.length;c++){var d=b[c].customLabel,e=d.label;if(e){var f=d.tx0,g=d.ty0,h=d.tx,i=d.tx2,j=d.ty,k=AmCharts.line(a.container,[f,h,i],[g,j,j],this.config.labelTickColor,this.config.labelTickAlpha);AmCharts.setCN(a,k,a.type+"-tick"),AmCharts.setCN(a,k,d.className,!0),d.tick=k,d.wedge.push(k)}}},this.setDepths=function(){var c,a=this.chart,b=a.chartData;for(c=0;c<b.length;c++){var d=b[c],e=d.customLabel.wedge,f=d.customLabel.startAngle;f>=0&&180>f?e.toFront():f>=180&&e.toBack()}},this.arrangeLabels=function(){var a=this.chart,b=a.chartData;b.length;var d,e;for(e=0;e<b.length;e++)d=b[e].customLabel,d.hidden||this.checkOverlapping(e,d)},this.checkOverlapping=function(a,b){var e,d=this.chart,g=d.chartData,h=b.label;if(h&&(e=this.checkOverlappingReal(b,g[a]),e===!0)){var i=b.ty+1;if(b.ty=i,h.translate(b.tx2,i),b.hitRect){var j=h.getBBox();b.hitRect.translate(b.tx2+j.x,i+j.y)}this.checkOverlapping(a,b)}},this.checkOverlappingReal=function(a,b){var c=!1,d=a.label,e=b.label;if(!a.hidden&&!b.hidden&&e){var f=d.node.getBoundingClientRect(),g={};g.width=f.width,g.height=f.height,g.y=f.top,g.x=f.left;var h=e.node.getBoundingClientRect(),i={};i.width=h.width,i.height=h.height,i.y=h.top,i.x=h.left,AmCharts.hitTest(g,i)&&(c=!0)}return c},this.drawLabels=function(){var a=this.chart,b=a.chartData;if(AmCharts.extend(this.config,this.chart.customLabel),1==this.config.enabled&&AmCharts.ifArray(b)&&a.realWidth>0&&a.realHeight>0){AmCharts.VML&&(a.startAlpha=1);var k,l,m,c=a.container,d=a.updateWidth(),e=a.updateHeight(),f=AmCharts.toCoordinate,g=f(a.marginLeft,d),h=f(a.marginRight,d),i=f(a.marginTop,e)+a.getTitleHeight(),j=f(a.marginBottom,e),n=AmCharts.toNumber(a.labelRadius),o=a.measureMaxLabel();o>a.maxLabelWidth&&(o=a.maxLabelWidth);var p;if(a.labelText&&a.labelsEnabled||(o=0,n=0),k=void 0===a.pieX?(d-g-h)/2+g:f(a.pieX,a.realWidth),l=void 0===a.pieY?(e-i-j)/2+i:f(a.pieY,e),m=f(a.radius,d,e),!m){var q;q=n>=0?d-g-h-2*o:d-g-h;var r=e-i-j;m=Math.min(q,r),q>r&&(m/=1-a.angle/90,m>q&&(m=q)),p=AmCharts.toCoordinate(a.pullOutRadius,m),m-=n>=0?1.8*(n+p):1.8*p,m/=2}m<a.minRadius&&(m=a.minRadius),p=f(a.pullOutRadius,m);var s=AmCharts.toCoordinate(a.startRadius,m),t=f(a.innerRadius,m);t>=m&&(t=m-1);var u=AmCharts.fitToBounds(a.startAngle,0,360);a.depth3D>0&&(u=u>=270?270:90),u-=90;var w,y,v=m-m*a.angle/90,x=0;for(w=0;w<b.length;w++)y=b[w],y.hidden!==!0&&(x+=AmCharts.roundTo(y.percents,a.pf.precision));for(x=AmCharts.roundTo(x,a.pf.precision),w=0;w<b.length;w++)if(y=b[w],y.hidden!==!0&&y.percents>0){var z=360*y.percents/100,A=Math.sin((u+z/2)/180*Math.PI),B=-Math.cos((u+z/2)/180*Math.PI)*(v/m),E=y.wedge;if(y.customLabel={wedge:E,ix:A,iy:B},a.labelsEnabled&&a.labelText&&y.percents>=a.hideLabelsPercent){var F=u+z/2;F>360&&(F-=360);var G=n;isNaN(y.labelRadius)||(G=y.labelRadius);var J,H=k+A*(m+G+this.config.labelRadius),I=l+B*(m+G+this.config.labelRadius),K=0;if(this.config.labelRadius>=0){var L;90>=F&&F>=0?(L=0,J="start",K=8):F>=90&&180>F?(L=1,J="start",K=8):F>=180&&270>F?(L=2,J="end",K=-8):F>=270&&360>F&&(L=3,J="end",K=-8)}else J="middle";var M=a.formatString(this.config.labelText,y),N=this.config.labelFunction;N&&(M=N(y.customLabel,M));var O=y.labelColor;if(O||(O=this.config.color),""!==M){var P=AmCharts.wrappedText(c,M,O,this.config.fontFamily,this.config.fontSize,J,!1,this.config.maxLabelWidth);if(AmCharts.setCN(a,P,"pie-label"),AmCharts.setCN(a,P,y.className,!0),P.translate(H+1.5*K,I),P.node.style.pointerEvents="none",y.customLabel.tx=H+1.5*K,y.customLabel.ty=I,y.customLabel.labelQuarter=L,G>=0){var Q=P.getBBox(),R=AmCharts.rect(c,Q.width+5,Q.height+5,"#FFFFFF",.005);R.translate(H+1.5*K+Q.x,I+Q.y),y.customLabel.hitRect=R,E.push(P),E.push(R)}else a.freeLabelsSet.push(P);y.customLabel.label=P}y.customLabel.tx=H,y.customLabel.tx2=H+K,y.customLabel.tx0=k+A*m,y.customLabel.ty0=l+B*m}var S=t+(m-t)/2;y.pulled&&(S+=a.pullOutRadiusReal),y.customLabel.balloonX=A*S+k,y.customLabel.balloonY=B*S+l,y.customLabel.startX=Math.round(A*s),y.customLabel.startY=Math.round(B*s),y.customLabel.pullX=Math.round(A*p),y.customLabel.pullY=Math.round(B*p),u+=360*y.percents/100}this.config.labelRadius>0&&!this.config.labelRadiusField&&this.arrangeLabels(),this.config.labelRadius>0&&this.drawTicks(),this.setDepths()}},this.chart.customLabel&&this.chart.customLabel.enabled===!0&&this.chart.addListener("drawn",function(){b.drawLabels()})}new b(a)},["pie"]);