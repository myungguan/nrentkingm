/**
  * Date: 2017-04-10
 */
$(function(){var a=$("#searchWrap"),e=$("#searchMap"),s=a.find("#searchForm"),r=a.find(".map-wrap"),t=(r.find(".map-point-wrap"),$(".list-content-wrap")),n=t.find(".list-scroll-inner"),i=n.find(".list-scroll-content"),o=function(){var e=$(".header-wrap").outerHeight(),s=window.innerHeight-e;s<400&&(s=400),a.css({height:s}),$("body").addClass("resized"),searchMap.map&&searchMap.center&&(clearTimeout(searchMap.timeout),searchMap.timeout=setTimeout(function(){searchMap.map.panTo(searchMap.center)},300))};o(),$(window).on("resize",function(){o()}),$(document).on("setRentshopMarker","#searchWrap",function(a,e){a.stopPropagation();var s=e.rentshop;if(searchMap.rentshopMarker)for(r=0;r<searchMap.rentshopMarker.length;r++)searchMap.rentshopMarker[r].setMap(null);if(searchMap.rentshopMarker=null,searchMap.bounds=new daum.maps.LatLngBounds,(searchMap.searchMarker||searchMap.pickupMarker||searchMap.pickupReturnMarker)&&searchMap.bounds.extend((searchMap.searchMarker||searchMap.pickupMarker||searchMap.pickupReturnMarker).getPosition()),s.length>0){searchMap.rentshopMarker=[];for(var r=0;r<s.length;r++){var t=new daum.maps.LatLng(s[r].lat,s[r].lng);searchMap.bounds.extend(t);var n=s[r].addr1.split(" "),i='<div class="info"><div class="name">'+s[r].affiliate+'</div><div class="address">'+n.slice(0,n.length>3&&("고양시"==n[1]||"성남시"==n[1])?4:3).join(" ")+'</div><div class="time"><div class="title">운영시간</div><div class="data">평일('+s[r].s1time1+" ~ "+s[r].s1time2+")<br />주말/공휴일("+s[r].s2time1+" ~ "+s[r].s2time2+')</div></div><div class="cars"><div class="title">운영차량 <span class="description">(이용가능/전체차량)</span></div><div class="data">'+s[r].availcar+"대/"+s[r].totalcar+"대</div></div></div>",o='<div class="marker rentshop-info" id="rentshop'+s[r].idx+'">'+i+"</div>",p=new daum.maps.CustomOverlay({position:t,content:o,yAnchor:1});p.idx=s[r].idx,p.setMap(searchMap.map),searchMap.rentshopMarker.push(p)}}searchMap.map.setBounds(searchMap.bounds)}).on("mouseenter","#searchMap .marker.rentshop-info",function(){var a=$(this),e=a.parent(),s=e.css("z-index");e.data("originalZIndex",s);var r=100;a.hasClass("on")&&(r=50),e.css({zIndex:r})}).on("mouseleave","#searchMap .marker.rentshop-info",function(){var a=$(this).parent(),e=a.data("originalZIndex");a.css({zIndex:e})}).on("click",".map-wrap .go-list",function(e){e.preventDefault(),a.addClass("list").removeClass("re-search"),a.data("detail")&&a.data("detail",!1),i.find("li.item").removeClass("on"),setTimeout(function(){searchMap.map.relayout(),searchMap.map.panTo(searchMap.center)},400)}).on("init",".list-content-wrap .list-scroll .page",function(e){e.stopPropagation();var s=$(this),r=a.offset();s.find("li.item").each(function(){var a=$(this),e=a.offset();window.listItemOffset.push({$item:a,offset:e.top-r.top+scrollTarget.scrollTop()})}),s.addClass("init"),scrollTarget.trigger("scroll")}).on("goRentshop",".list-content-wrap .list-scroll .page li.item",function(s){s.stopPropagation();var r=$(this),t=r.data("rentshop"),n=function(){if(!e.find("#rentshop"+t).hasClass("on")){e.find(".marker.rentshop-info").removeClass("on").trigger("mouseleave");for(var a in searchMap.rentshopMarker)if(searchMap.rentshopMarker[a].idx==t){var s=new daum.maps.LatLngBounds;s.extend(searchMap.rentshopMarker[a].getPosition()),(searchMap.searchMarker||searchMap.pickupMarker||searchMap.pickupReturnMarker)&&s.extend((searchMap.searchMarker||searchMap.pickupMarker||searchMap.pickupReturnMarker).getPosition()),searchMap.map.setBounds(s),searchMap.map.setLevel(searchMap.map.getLevel()+1),searchMap.center=searchMap.map.getCenter()}e.find("#rentshop"+t).addClass("on").trigger("mouseenter")}};r.hasClass("on")?!a.hasClass("detail")||a.hasClass("filter")?(a.addClass("detail").data("detail",!0),clearTimeout(searchMap.timeout),searchMap.timeout=setTimeout(function(){searchMap.map.relayout(),n()},300)):n():function(){e.find("#rentshop"+t).hasClass("on")&&e.find(".marker.rentshop-info").removeClass("on").trigger("mouseleave")}()}).on("click",".list-search-wrap button.option, .list-content-wrap .grade-info button.option",function(){s.trigger("resetList").submit()}).on("click",'.list-search-wrap input[name="nosmoke"]',function(){s.trigger("resetList").submit()}),runLocationTask()});
//# sourceMappingURL=rentking.w.search.min.js.map
